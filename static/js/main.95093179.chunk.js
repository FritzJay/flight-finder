(this["webpackJsonpflight-finder"]=this["webpackJsonpflight-finder"]||[]).push([[0],{117:function(e,a,t){e.exports=t(132)},132:function(e,a,t){"use strict";t.r(a);var n,r=t(0),i=t.n(r),c=t(12),l=t(11),s=t.n(l),o=t(46),u=t(13),d=t(2),m=t(178),p=t(205),g=t(217),E=t(213),h=t(206),f=t(207),b=t(43),v=t(209),y=t(190),O=t(210),S=t(198),C=t(211),j=t(208),L=t(90),T=t.n(L),k=t(92),_=t.n(k),w=t(91),D=t.n(w),I=t(216),x=t(181),A=t(182),N=t(183),G=t(184),F=t(185),R=t(86),V=t.n(R),B=t(83),P=t.n(B),H=t(84),M=t.n(H),z=t(85),K=t.n(z);!function(e){e[e.CreateEstimate=0]="CreateEstimate",e[e.Flights=1]="Flights",e[e.Lodging=2]="Lodging",e[e.Vehicles=3]="Vehicles"}(n||(n={}));var U=function(e){return{type:"ADD_LOADING_LINK",payload:e}},J=function(e){return{type:"REMOVE_LOADING_LINK",payload:e}},W=function(e){return{type:"SET_DRAWER_OPEN",payload:e}},q=function(e){return{type:"SET_SETTINGS_OPEN",payload:e}},X=function(e){return{type:"SET_CALCULATING",payload:e}},Q={selectedLink:n.CreateEstimate,activeLinks:[n.CreateEstimate],loadingLinks:[],isDrawerOpen:!0,isSettingsOpen:!1,isCalculating:!1},Y=Object(m.a)((function(){return Object(I.a)({icon:{position:"absolute",alignSelf:"center",marginLeft:"3px"},iconProgress:{position:"absolute",alignSelf:"center"}})})),Z=[{Icon:P.a,label:"Flights",link:n.Flights},{Icon:M.a,label:"Lodging",link:n.Lodging},{Icon:K.a,label:"Vehicles",link:n.Vehicles}],$=function(){var e=function(){var e=Object(c.b)(),a=Y();return Object(c.c)((function(t){return{classes:a,selectedLink:t.system.selectedLink,activeLinks:t.system.activeLinks,loadingLinks:t.system.loadingLinks,handleSelectLink:function(a){return e(function(e){return{type:"SET_SELECTED_LINK",payload:e}}(a))}}}))}(),a=e.classes,t=e.selectedLink,r=e.activeLinks,l=e.loadingLinks,s=e.handleSelectLink;return i.a.createElement(x.a,null,i.a.createElement(A.a,{button:!0,divider:!0,selected:t===n.CreateEstimate,onClick:function(){return s(n.CreateEstimate)}},i.a.createElement(N.a,null,i.a.createElement(V.a,{className:a.icon})),i.a.createElement(G.a,{primary:"Create Estimate"})),Z.map((function(e){var n=e.label,c=e.Icon,o=e.link;return i.a.createElement(A.a,{key:n,button:!0,selected:t===o,disabled:!r.includes(o),onClick:function(){return s(o)}},i.a.createElement(N.a,null,i.a.createElement(i.a.Fragment,null,i.a.createElement(c,{className:a.icon}),l.includes(o)&&i.a.createElement(F.a,{size:29,className:a.iconProgress}))),i.a.createElement(G.a,{primary:n}))})))},ee=t(193),ae=t(194),te=t(195),ne=t(196),re=t(197),ie=function(e){return{type:"SET_DEPARTURE",payload:e}},ce={departure:null,averages:{flights:!0,lodging:!0,vehicles:!0},times:[0,7,14]},le=t(186),se=t(187),oe=t(188),ue=t(189),de=t(215),me=t(191),pe=function(e){var a=e.classes,t=function(){var e=Object(c.b)();return Object(c.c)((function(a){var t=a.settings.averages;return{flights:t.flights,lodging:t.lodging,vehicles:t.vehicles,handleChange:function(a){switch(a.target.name){case"flights":return e({type:"SET_AVERAGES_FLIGHTS",payload:a.target.checked});case"lodging":return e(function(e){return{type:"SET_AVERAGES_LODGING",payload:e}}(a.target.checked));case"vehicles":return e(function(e){return{type:"SET_AVERAGES_VEHICLES",payload:e}}(a.target.checked));default:throw new Error("Invalid checkbox name.")}}}}))}(),n=t.flights,r=t.lodging,l=t.vehicles,s=t.handleChange,o=!n&&!r&&!l;return i.a.createElement(le.a,{component:"fieldset",error:o,className:a.formControl},i.a.createElement(se.a,{required:!0,component:"legend"},"Calculate Averages For"),i.a.createElement(oe.a,null,i.a.createElement(ue.a,{control:i.a.createElement(de.a,{checked:n,onChange:s,name:"flights"}),label:"Flights"}),i.a.createElement(ue.a,{control:i.a.createElement(de.a,{checked:r,onChange:s,name:"lodging"}),label:"Lodging"}),i.a.createElement(ue.a,{control:i.a.createElement(de.a,{checked:l,onChange:s,name:"vehicles"}),label:"Vehicles"})),i.a.createElement(me.a,null,o&&"Select at least one"))},ge=function(e){var a=e.classes,t=function(){var e=Object(c.b)();return Object(c.c)((function(a){return{times:a.settings.times,handleAddTime:function(a){return void 0!==a&&e({type:"ADD_TIME",payload:a})},handleRemoveTime:function(a){return void 0!==a&&e({type:"REMOVE_TIME",payload:a})}}}))}(),n=t.times,r=t.handleAddTime,l=t.handleRemoveTime,s=n.length<=0;return i.a.createElement(le.a,{component:"fieldset",error:s,className:a.formControl},i.a.createElement(se.a,{required:!0,component:"legend"},"Calculate Averages At"),i.a.createElement(oe.a,null,[0,7,14,30,60].map((function(e){return i.a.createElement(ue.a,{control:i.a.createElement(de.a,{checked:n.includes(e),onChange:function(){return n.includes(e)?l(e):r(e)},name:e.toString()}),label:"".concat(e," days from now")})}))),i.a.createElement(me.a,null,s&&"Select at least one"))},Ee=t(57),he=t(212),fe=t(214),be=t(23),ve=t.n(be),ye=t(41),Oe=function(){var e=Object(ye.a)(ve.a.mark((function e(){var a;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://fritzjay-flight-finder-api.herokuapp.com/bases");case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(e){var a=e.label,t=e.onChange,n=e.value,l=function(e){var a=Object(r.useState)(!1),t=Object(Ee.a)(a,2),n=t[0],i=t[1],l=Object(r.useState)([]),s=Object(Ee.a)(l,2),o=s[0],u=s[1];return Object(r.useEffect)((function(){i(!0),Oe().then((function(e){u(e),i(!1)})).catch((function(e){console.error(e),i(!1)}))}),[]),Object(c.c)((function(a){return{options:o,loading:n,handleChange:function(a,t){return e(t)}}}))}(t),s=l.loading,o=l.options,u=l.handleChange;return i.a.createElement(fe.a,{id:"bases-combo-box",autoComplete:!0,disableClearable:!0,loading:s,options:o,selectOnFocus:!0,value:n,onChange:u,getOptionLabel:function(e){return e.name},renderInput:function(e){return i.a.createElement(he.a,Object.assign({},e,{label:a,variant:"outlined"}))}})},Ce=Object(m.a)((function(e){return Object(I.a)({formControl:{margin:e.spacing(3),background:e.palette.background.paper},button:{height:"100%"}})})),je=function(){var e=function(){var e=Object(c.b)(),a=Ce();return Object(c.c)((function(t){return{classes:a,open:t.system.isSettingsOpen,departure:t.settings.departure,handleClose:function(){return e(q(!1))},handleBaseChange:function(a){return e(ie(a))}}}))}(),a=e.classes,t=e.open,n=e.departure,r=e.handleClose,l=e.handleBaseChange;return i.a.createElement(ee.a,{open:t,onClose:r,"aria-labelledby":"Settings","aria-describedby":"Specify the types and methods of calculations."},i.a.createElement(ae.a,null,"Settings"),i.a.createElement(te.a,null,i.a.createElement(Se,{label:"Default Departure",value:n,onChange:l}),i.a.createElement(pe,{classes:a}),i.a.createElement(ge,{classes:a})),i.a.createElement(ne.a,null,i.a.createElement(re.a,{onClick:r,color:"primary"},"Save")))},Le=t(96),Te=t(89),ke=t.n(Te),_e={destination:null,email:null},we=t(88),De=function(e,a){return{type:"SET_FLIGHTS_BATCH",payload:{time:e.toString(),flights:a}}},Ie=function(e){return{type:"ADD_FLIGHTS_UPDATE",payload:{description:e,date:new Date(Date.now()).toUTCString()}}},xe={batches:{},updates:[]},Ae=function(){var e=Object(ye.a)(ve.a.mark((function e(a,t,n){var r;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://fritzjay-flight-finder-api.herokuapp.com"+"/flights?".concat(Ne(a,t,n)));case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),Ne=function(e,a,t){return"departureBaseId=".concat(e.id,"&arrivalBaseId=").concat(a.id,'&date="').concat(t.toLocaleDateString().replace(/\//g,"-"))},Ge=function(e){var a=new Date(Date.now());return a.setDate(a.getDate()+e),a},Fe=function(){var e=Object(ye.a)(ve.a.mark((function e(a,t,r,i){var c,l,s,o,u,d;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Calculating flight averages for "+i),a({type:"ADD_ACTIVE_LINK",payload:n.Flights}),a(U(n.Flights)),c=Object(we.a)(i),e.prev=4,c.s();case 6:if((l=c.n()).done){e.next=18;break}return s=l.value,o=Ge(s),u=o.toLocaleDateString("us"),a(Ie("Gathering flight information for ".concat(u,"."))),e.next=13,Ae(t,r,o);case 13:d=e.sent,a(De(s,d)),a(Ie("Found ".concat(d.length," potential flights on ").concat(u,".")));case 16:e.next=6;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:a(J(n.Flights)),console.log("Finished calculating flight averages for "+i);case 28:case"end":return e.stop()}}),e,null,[[4,20,23,26]])})));return function(a,t,n,r){return e.apply(this,arguments)}}(),Re=t(201),Ve=t(202),Be=t(204),Pe=t(200),He=t(203),Me=t(199),ze=Object(m.a)((function(e){return{paper:{padding:e.spacing(3),display:"flex",overflow:"auto",flexDirection:"column"},progress:{width:"100%"},hidden:{visibility:"hidden"}}})),Ke=function(e){var a=e.updates,t=function(){var e=ze();return Object(c.c)((function(a){return{classes:e,loading:a.system.isCalculating}}))}(),n=t.classes,r=t.loading,l=a.map((function(e){return function(e){var a=Math.abs(e.getSeconds()-new Date(Date.now()).getSeconds());return a<=0?"Less than a second ago":a<60?"".concat(a," seconds ago"):a<3600?"".concat(Math.floor(a/60)," minutes ago"):a<216e3?"".concat(Math.floor(a/60*60)," hours ago"):a<5184e3?"".concat(Math.floor(a/5184e3)," days ago"):"A long long time ago"}(new Date(e.date))}));return i.a.createElement(S.a,{item:!0,xs:12},i.a.createElement(Le.a,{className:n.paper},i.a.createElement(b.a,{variant:"h5"},"Progress"),i.a.createElement(Me.a,{className:Object(d.a)(n.progress,r?null:n.hidden),variant:"query"}),i.a.createElement(Pe.a,null,i.a.createElement(Re.a,{"aria-label":"updates table",size:"small"},i.a.createElement(Ve.a,null,a.map((function(e,a){var t=e.description,n=e.date;return i.a.createElement(He.a,{key:n+t},i.a.createElement(Be.a,{colSpan:3},t),i.a.createElement(Be.a,{align:"right"},l[a]))})))))))},Ue=Object(m.a)((function(e){return{paper:{padding:e.spacing(3),display:"flex",overflow:"auto",flexDirection:"column"},textField:{width:"100%"}}})),Je=function(){var e=Object(c.b)(),a=Ue(),t=function(){var e=Object(c.b)(),a=Object(c.c)((function(e){return{times:e.settings.times,departure:e.settings.departure,destination:e.createEstimate.destination}})),t=a.departure,n=a.destination,r=a.times;return Object(ye.a)(ve.a.mark((function a(){return ve.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null!==t&&null!==n){a.next=2;break}return a.abrupt("return");case 2:return e({type:"CLEAR_FLIGHTS_UPDATES"}),e(X(!0)),a.prev=4,a.next=7,Fe(e,t,n,r);case 7:return a.prev=7,e(X(!1)),a.finish(7);case 10:case"end":return a.stop()}}),a,null,[[4,,7,10]])})))}();return Object(c.c)((function(n){return{classes:a,isCalculating:n.system.isCalculating,base:n.createEstimate.destination,email:n.createEstimate.email,updates:n.flights.updates,handleBaseChange:function(a){return e({type:"SET_DESTINATION",payload:a})},handleExecute:t,handleEmailChange:function(a){return e({type:"SET_EMAIL",payload:""===a.target.value?null:a.target.value})}}}))},We=function(){var e=Je(),a=e.classes,t=e.isCalculating,n=e.base,r=e.email,c=e.updates,l=e.handleBaseChange,s=e.handleExecute,o=e.handleEmailChange;return i.a.createElement(i.a.Fragment,null,i.a.createElement(S.a,{item:!0,xs:12},i.a.createElement(Le.a,{className:a.paper},i.a.createElement(S.a,{container:!0,item:!0,xs:12,spacing:3},i.a.createElement(S.a,{item:!0,xs:12},i.a.createElement(b.a,{variant:"h4"},"Create Estimate")),i.a.createElement(S.a,{item:!0,xs:12,sm:6},i.a.createElement(Se,{label:"Select Base",value:n,onChange:l})),i.a.createElement(S.a,{item:!0,xs:12,sm:6},i.a.createElement(he.a,{className:a.textField,id:"email",label:"Email",variant:"outlined",value:r||"",onChange:o})),i.a.createElement(S.a,{container:!0,spacing:1,justify:"flex-end",item:!0,xs:12},i.a.createElement(S.a,{item:!0},i.a.createElement(re.a,{disabled:t,variant:"contained",color:"primary",onClick:s,startIcon:t?i.a.createElement(F.a,{size:20}):i.a.createElement(ke.a,null)},"Create Estimate")))))),c.length>0&&i.a.createElement(Ke,{updates:c}))},qe=t(192),Xe=Object(m.a)((function(e){return{paper:{padding:e.spacing(3),display:"flex",overflow:"auto",flexDirection:"column"},flights:{position:"relative",overflow:"auto",maxHeight:"300px"}}})),Qe=function(){var e=function(){var e=Xe(),a=i.a.useState(0),t=Object(Ee.a)(a,2),n=t[0],r=t[1];return Object(c.c)((function(a){var t=a.flights;return{classes:e,batches:t.batches,tab:n,handleTabChange:function(e,a){return r(a)}}}))}(),a=e.classes,t=(e.tab,e.handleTabChange,e.batches);return i.a.createElement(i.a.Fragment,null,Object.keys(t).map((function(e){var n=t[e];return i.a.createElement(S.a,{item:!0,xs:6},i.a.createElement(Le.a,{className:a.paper},i.a.createElement(S.a,{container:!0,item:!0,xs:12,spacing:3},i.a.createElement(S.a,{item:!0,xs:12},i.a.createElement(b.a,{variant:"h4"},e," days")),i.a.createElement(S.a,{item:!0,xs:12,className:a.flights},i.a.createElement(x.a,{"aria-label":"flights"},i.a.createElement(qe.a,{color:"primary"},"Test"),n.map((function(e){return i.a.createElement(A.a,null,i.a.createElement(G.a,null,e))})))))))})),i.a.createElement(S.a,{item:!0,xs:6},i.a.createElement(Le.a,{className:a.paper},i.a.createElement(S.a,{container:!0,item:!0,xs:12,spacing:3},i.a.createElement(b.a,{variant:"h4"},"Flights")))))},Ye=Object(m.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(u.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(o.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(6)},e.breakpoints.up("sm"),{width:e.spacing(8)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},fixedHeight:{height:240}}}));function Ze(){var e=function(){var e=Ye(),a=Object(c.b)();return Object(c.c)((function(t){return{classes:e,open:t.system.isDrawerOpen,selectedLink:t.system.selectedLink,isCalculating:t.system.isCalculating,handleDrawerOpen:function(){return a(W(!0))},handleDrawerClose:function(){return a(W(!1))},handleToggleSettings:function(){return a(q(!t.system.isSettingsOpen))}}}))}(),a=e.classes,t=e.open,r=e.selectedLink,l=e.isCalculating,s=e.handleDrawerOpen,o=e.handleDrawerClose,u=e.handleToggleSettings;return i.a.createElement("div",{className:a.root},i.a.createElement(p.a,null),i.a.createElement(h.a,{position:"absolute",className:Object(d.a)(a.appBar,t&&a.appBarShift)},i.a.createElement(f.a,{className:a.toolbar},i.a.createElement(y.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:s,className:Object(d.a)(a.menuButton,t&&a.menuButtonHidden)},i.a.createElement(T.a,null)),i.a.createElement(b.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:a.title},"Dashboard"),i.a.createElement(y.a,{disabled:l,onClick:u,color:"inherit"},i.a.createElement(j.a,{title:"Adjust settings","aria-label":"Adjust settings"},i.a.createElement(D.a,null))))),i.a.createElement(g.a,{variant:"permanent",classes:{paper:Object(d.a)(a.drawerPaper,!t&&a.drawerPaperClose)},open:t},i.a.createElement("div",{className:a.toolbarIcon},i.a.createElement(y.a,{onClick:o},i.a.createElement(_.a,null))),i.a.createElement(v.a,null),i.a.createElement($,null)),i.a.createElement("main",{className:a.content},i.a.createElement("div",{className:a.appBarSpacer}),i.a.createElement(O.a,{className:a.container},i.a.createElement(S.a,{container:!0,spacing:3},function(e){switch(e){case n.CreateEstimate:return i.a.createElement(We,null);case n.Flights:return i.a.createElement(Qe,null);case n.Lodging:return i.a.createElement("div",null,"Lodging");case n.Vehicles:return i.a.createElement("div",null,"Vehicles");default:throw new Error("Invalid Link")}}(r)),i.a.createElement(E.a,{pt:4},i.a.createElement(b.a,{variant:"body2",color:"textSecondary",align:"center"},"Created By ",i.a.createElement(C.a,{color:"inherit",href:"https://github.com/FritzJay"},"Fritz Jay")," 2020.")))),i.a.createElement(je,null))}var $e=t(45),ea=t(93),aa=t(94),ta=t.n(aa),na=Object($e.combineReducers)({system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_SELECTED_LINK":return Object(u.a)({},e,{selectedLink:a.payload});case"ADD_ACTIVE_LINK":return Object(u.a)({},e,{activeLinks:e.activeLinks.includes(a.payload)?e.activeLinks:e.activeLinks.concat([a.payload])});case"REMOVE_ACTIVE_LINK":return Object(u.a)({},e,{activeLinks:e.activeLinks.filter((function(e){return e!==a.payload}))});case"ADD_LOADING_LINK":return Object(u.a)({},e,{loadingLinks:e.loadingLinks.includes(a.payload)?e.loadingLinks:e.loadingLinks.concat([a.payload])});case"REMOVE_LOADING_LINK":return Object(u.a)({},e,{loadingLinks:e.loadingLinks.filter((function(e){return e!==a.payload}))});case"SET_DRAWER_OPEN":return Object(u.a)({},e,{isDrawerOpen:a.payload});case"SET_SETTINGS_OPEN":return Object(u.a)({},e,{isSettingsOpen:a.payload});case"SET_CALCULATING":return Object(u.a)({},e,{isCalculating:a.payload});default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_AVERAGES_FLIGHTS":return Object(u.a)({},e,{averages:Object(u.a)({},e.averages,{flights:a.payload})});case"SET_AVERAGES_LODGING":return Object(u.a)({},e,{averages:Object(u.a)({},e.averages,{lodging:a.payload})});case"SET_AVERAGES_VEHICLES":return Object(u.a)({},e,{averages:Object(u.a)({},e.averages,{vehicles:a.payload})});case"ADD_TIME":return Object(u.a)({},e,{times:e.times.includes(a.payload)?e.times:e.times.concat([a.payload])});case"REMOVE_TIME":return Object(u.a)({},e,{times:e.times.filter((function(e){return e!==a.payload}))});case"SET_DEPARTURE":return Object(u.a)({},e,{departure:a.payload});default:return e}},createEstimate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_DESTINATION":return Object(u.a)({},e,{destination:a.payload});case"SET_EMAIL":return Object(u.a)({},e,{email:a.payload});default:return e}},flights:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_FLIGHTS_BATCH":return Object(u.a)({},e,{batches:Object(u.a)({},e.batches,Object(o.a)({},a.payload.time,a.payload.flights))});case"ADD_FLIGHTS_UPDATE":return Object(u.a)({},e,{updates:e.updates.concat([a.payload])});case"CLEAR_FLIGHTS_UPDATES":return Object(u.a)({},e,{updates:[]});default:return e}}}),ra=Object($e.createStore)(na,void 0,Object(ea.composeWithDevTools)(ta()()));Oe().then((function(e){var a=e.find((function(e){return"GEG"===e.airportCode}))||null;ra.dispatch(ie(a))})),s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(c.a,{store:ra},i.a.createElement(Ze,null))),document.getElementById("root"))}},[[117,1,2]]]);
//# sourceMappingURL=main.95093179.chunk.js.map